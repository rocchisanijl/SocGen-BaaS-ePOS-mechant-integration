{
    "info": {
        "_postman_id": "930b5f09-a29d-48ac-a550-5bb414b13089",
        "name": "UAT Testing FIntechOS",
        "description": "Collection for UAT of FTOS delivered ePOS system.\n\n-Run one of the *GetToken* requests, to get the access token from SG Connect. This token is saved as a variable.\n-Run either of the *ProcessAndRedirect* re  requests to send initiate the journey\n-These requests generate a unique orderId in the pre-test to be used by the request. orderId is displayed in the console.\n-For the *ProcessAndRedirect - HB* request, a URL is returned. Copy this into a browser to test the flow.\n-For the *ProcessAndRedirect - FF* request, raw html is returned. Copy this into notepad and save it as a .html file. Then open the file in a browser to continue the journey.",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "GetToken - eMerchant1",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            " var token = pm.response.json().body ;\r",
                            " pm.globals.set('accessToken',pm.response.json().access_token);\r",
                            " console.log(pm.response.json().access_token);"
                        ],
                        "type": "text/javascript",
                        "id": "dc7d6e6e-4481-4e76-a274-ad513f79f3ee"
                    }
                },
                {
                    "listen": "prerequest",
                    "script": {
                        "exec": [
                            "var merchant = \"EM1\"\r",
                            "pm.collectionVariables.set(\"merchant\",merchant);\r",
                            "\r",
                            ""
                        ],
                        "type": "text/javascript",
                        "id": "61f82ea8-c510-4071-a014-c3ab78884970"
                    }
                }
            ],
            "id": "1db6435d-eb12-4075-a6d5-676cdb353f0b",
            "protocolProfileBehavior": {
                "disableBodyPruning": true
            },
            "request": {
                "auth": {
                    "type": "basic",
                    "basic": [
                        {
                            "key": "password",
                            "value": "3l04hacc44g8kbd3eh64fldmg19e",
                            "type": "string"
                        },
                        {
                            "key": "username",
                            "value": "797d24f4-6ff2-42c0-89f3-01a2989a0ae9",
                            "type": "string"
                        }
                    ]
                },
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/x-www-form-urlencoded",
                        "type": "text"
                    }
                ],
                "url": {
                    "raw": "https://sso.sgmarkets.com/sgconnect/oauth2/access_token?grant_type=client_credentials&scope=openid",
                    "protocol": "https",
                    "host": [
                        "sso",
                        "sgmarkets",
                        "com"
                    ],
                    "path": [
                        "sgconnect",
                        "oauth2",
                        "access_token"
                    ],
                    "query": [
                        {
                            "key": "grant_type",
                            "value": "client_credentials"
                        },
                        {
                            "key": "scope",
                            "value": "openid"
                        }
                    ]
                }
            },
            "response": []
        },
        {
            "name": "GetToken - eMerchant2",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            " var token = pm.response.json().body ;\r",
                            " pm.globals.set('accessToken',pm.response.json().access_token);\r",
                            " console.log(pm.response.json().access_token);"
                        ],
                        "type": "text/javascript",
                        "id": "b527a0be-05f5-4e48-b653-77e504ea169f"
                    }
                },
                {
                    "listen": "prerequest",
                    "script": {
                        "exec": [
                            "var merchant = \"EM2\"\r",
                            "pm.collectionVariables.set(\"merchant\",merchant);\r",
                            "\r",
                            ""
                        ],
                        "type": "text/javascript",
                        "id": "d5d4ffdc-c814-4eed-99e0-bbf47becd7a4"
                    }
                }
            ],
            "id": "71527100-4617-41f8-bd2d-2d05bbef9200",
            "protocolProfileBehavior": {
                "disableBodyPruning": true
            },
            "request": {
                "auth": {
                    "type": "basic",
                    "basic": [
                        {
                            "key": "password",
                            "value": "23c028cddg0239mgk0ce91h4cmm1g",
                            "type": "string"
                        },
                        {
                            "key": "username",
                            "value": "12bea33e-0746-4022-a8d3-f487d04ec54b",
                            "type": "string"
                        }
                    ]
                },
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/x-www-form-urlencoded",
                        "type": "text"
                    }
                ],
                "url": {
                    "raw": "https://sso.sgmarkets.com/sgconnect/oauth2/access_token?grant_type=client_credentials&scope=openid",
                    "protocol": "https",
                    "host": [
                        "sso",
                        "sgmarkets",
                        "com"
                    ],
                    "path": [
                        "sgconnect",
                        "oauth2",
                        "access_token"
                    ],
                    "query": [
                        {
                            "key": "grant_type",
                            "value": "client_credentials"
                        },
                        {
                            "key": "scope",
                            "value": "openid"
                        }
                    ]
                }
            },
            "response": []
        },
        {
            "name": "do-initialize FF",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            ""
                        ],
                        "type": "text/javascript",
                        "id": "3cbd79dc-837c-4303-b73b-d7efff6658a6"
                    }
                },
                {
                    "listen": "prerequest",
                    "script": {
                        "exec": [
                            "var orderId = \"UAT_\" + pm.variables.get(\"merchant\") + \"_\" + pm.variables.replaceIn('{{$randomHexColor}}');\r",
                            "console.log(orderId);\r",
                            "pm.collectionVariables.set(\"orderId\",orderId);\r",
                            "\r",
                            ""
                        ],
                        "type": "text/javascript",
                        "id": "72f13aa8-9fad-493a-8689-a7bb60252f8b"
                    }
                }
            ],
            "id": "6af9ab83-73fd-492c-af70-64575b45d8ec",
            "protocolProfileBehavior": {
                "disableBodyPruning": true
            },
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Token",
                        "value": "ada861fa-7ded-4cb3-b0ff-bfbc20ce1eac",
                        "type": "text",
                        "disabled": true
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\r\n    \"amount\": 11400,\r\n    \"customerId\": \"701943\",\r\n    \"normalReturnUrl\": \"https://fintechos.com/\",\r\n    \"shoppingCartDetail\": {\r\n        \"mainProduct\": \"PANTALON B MAGO\",\r\n        \"shoppingCartTotalAmount\": \"9500\",\r\n        \"shoppingCartTotalQuantity\": \"2\",\r\n        \"SKU\": \"50\",\r\n        \"shoppingCartItemList\": {\r\n            \"productName\": \"PANTALON B MAGO\",\r\n            \"productUnitAmount\": \"4750\",\r\n            \"productQuantity\": \"2\",\r\n            \"productDescription\": \"\"\r\n        }\r\n    },\r\n    \"customerAddress\": {\r\n       \"city\": \"GAP\",\r\n        \"street\": \"93 Avenue d'Embrun\",\r\n        \"zipCode\": \"05000\",\r\n        \"country\": \"FR\"\r\n    },\r\n    \"billingAddress\": {\r\n        \"city\": \"Paris\",\r\n        \"street\": \"97 Avenue d'Embrun\",\r\n        \"zipCode\": \"06000\",\r\n        \"country\": \"FR\",\r\n        \"company\": \"\"\r\n    },\r\n    \"deliveryAddress\": {\r\n        \"city\": \"Paris\",\r\n        \"street\": \"voltaire\",\r\n        \"zipCode\": \"75000\",\r\n        \"country\": \"FR\",\r\n        \"company\": \"\"\r\n    },\r\n    \"customerContact\": {\r\n        \"legalId\": \"\",\r\n        \"email\": \"customer@email.com\",\r\n        \"lastName\": \"test\",\r\n        \"firstName\": \"david\",\r\n        \"mobile\": \"0676188860\",\r\n        \"phone\": \"0484749393\"\r\n    },\r\n    \"billingContact\": {\r\n        \"legalId\": \"\",\r\n        \"email\": \"customer@email.com\",\r\n        \"lastName\": \"GAP\",\r\n        \"firstName\": \"Maryon\",\r\n        \"mobile\": \"0676188860\",\r\n        \"phone\": \"0484749393\"\r\n    },\r\n     \"deliveryContact\": {\r\n        \"legalId\": \"\",\r\n        \"email\": \"customer@email.com\",\r\n        \"lastName\": \"Durand\",\r\n        \"firstName\": \"John\",\r\n        \"mobile\": \"0676188860\",\r\n        \"phone\": \"0678020202\"\r\n    },\r\n    \"orderId\": \"{{orderId}}\",\r\n    \"paymentMean\": \"FRF_3X\"\r\n}\r\n",
                    "options": {
                        "raw": {
                            "language": "json"
                        }
                    }
                },
                "url": {
                    "raw": "{{URL}}/Func-SocGenEPOS-uat/ProcessAndRedirect?access_token={{accessToken}}",
                    "host": [
                        "{{URL}}"
                    ],
                    "path": [
                        "Func-SocGenEPOS-uat",
                        "ProcessAndRedirect"
                    ],
                    "query": [
                        {
                            "key": "access_token",
                            "value": "{{accessToken}}"
                        }
                    ]
                }
            },
            "response": []
        },
        {
            "name": "do-initialize HB",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "id": "2019b3b1-8f2b-45ab-bac0-d7f9ebf0ab11",
                        "exec": [
                            ""
                        ],
                        "type": "text/javascript"
                    }
                },
                {
                    "listen": "prerequest",
                    "script": {
                        "id": "556f2b49-6738-4b41-b76f-228ea72c35d0",
                        "exec": [
                            "var orderId = \"UAT_\" + pm.variables.get(\"merchant\") + \"_\" + pm.variables.replaceIn('{{$randomHexColor}}');\r",
                            "console.log(orderId);\r",
                            "pm.collectionVariables.set(\"orderId\",orderId);\r",
                            "\r",
                            ""
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "id": "b9e5f8f7-cf87-4774-bc73-067073b2d2bc",
            "protocolProfileBehavior": {
                "disableBodyPruning": true
            },
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Token",
                        "value": "ada861fa-7ded-4cb3-b0ff-bfbc20ce1eac",
                        "type": "text",
                        "disabled": true
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\r\n   \"amount\": 1400,\r\n   \"customerId\": \"701943\",\r\n   \"normalReturnUrl\": \"https://fintechos.com/\",\r\n   \"shoppingCartDetail\": {\r\n       \"mainProduct\": \"PANTALON B MAGO\",\r\n       \"shoppingCartTotalAmount\": \"9500\",\r\n       \"shoppingCartTotalQuantity\": \"2\",\r\n       \"SKU\": \"50\",\r\n       \"shoppingCartItemList\": {\r\n           \"productName\": \"PANTALON B MAGO\",\r\n           \"productUnitAmount\": \"4750\",\r\n           \"productQuantity\": \"2\",\r\n           \"productDescription\": \"\"\r\n       }\r\n   },\r\n   \"customerAddress\": {\r\n      \"city\": \"GAP\",\r\n       \"street\": \"93 Avenue d'Embrun\",\r\n       \"zipCode\": \"05000\",\r\n       \"country\": \"DE\"\r\n   },\r\n   \"billingAddress\": {\r\n       \"city\": \"Paris\",\r\n       \"street\": \"97 Avenue d'Embrun\",\r\n       \"zipCode\": \"06000\",\r\n       \"country\": \"DE\",\r\n       \"company\": \"\"\r\n   },\r\n   \"deliveryAddress\": {\r\n       \"city\": \"Paris\",\r\n       \"street\": \"voltaire\",\r\n       \"zipCode\": \"75000\",\r\n       \"country\": \"DE\",\r\n       \"company\": \"\"\r\n   },\r\n   \"customerContact\": {\r\n       \"legalId\": \"\",\r\n       \"email\": \"customer@email.com\",\r\n       \"lastName\": \"test\",\r\n       \"firstName\": \"david\",\r\n       \"mobile\": \"+490676188860\",\r\n       \"phone\": \"+490484749393\"\r\n   },\r\n   \"billingContact\": {\r\n       \"legalId\": \"\",\r\n       \"email\": \"customer@email.com\",\r\n       \"lastName\": \"GAP\",\r\n       \"firstName\": \"Maryon\",\r\n       \"mobile\": \"+490676188860\",\r\n       \"phone\": \"+490484749393\"\r\n   },\r\n    \"deliveryContact\": {\r\n       \"legalId\": \"\",\r\n       \"email\": \"customer@email.com\",\r\n       \"lastName\": \"Durand\",\r\n       \"firstName\": \"John\",\r\n       \"mobile\": \"+490676188860\",\r\n       \"phone\": \"+490678020202\"\r\n   },\r\n   \"orderId\": \"{{orderId}}\",\r\n   \"paymentMean\": \"REVOLVINGPOS\"\r\n}",
                    "options": {
                        "raw": {
                            "language": "json"
                        }
                    }
                },
                "url": {
                    "raw": "{{URL}}/Func-SocGenEPOS-uat/ProcessAndRedirect?access_token={{accessToken}}",
                    "host": [
                        "{{URL}}"
                    ],
                    "path": [
                        "Func-SocGenEPOS-uat",
                        "ProcessAndRedirect"
                    ],
                    "query": [
                        {
                            "key": "access_token",
                            "value": "{{accessToken}}"
                        }
                    ]
                }
            },
            "response": []
        },
        {
            "name": "do-search",
            "id": "04fa6b7f-acf9-49c8-b9ec-176a294eb74f",
            "protocolProfileBehavior": {
                "disableBodyPruning": true
            },
            "request": {
                "method": "GET",
                "header": [],
                "body": {
                    "mode": "raw",
                    "raw": "{  \r\n    \"orderId\": \"ME040\"\r\n}",
                    "options": {
                        "raw": {
                            "language": "json"
                        }
                    }
                },
                "url": {
                    "raw": "{{URL}}/Func-SocGenEPOS-uat/ProcessAndRedirect?access_token={{accessToken}}&orderId=UAT_EM1_%2304291c",
                    "host": [
                        "{{URL}}"
                    ],
                    "path": [
                        "Func-SocGenEPOS-uat",
                        "ProcessAndRedirect"
                    ],
                    "query": [
                        {
                            "key": "access_token",
                            "value": "{{accessToken}}"
                        },
                        {
                            "key": "orderId",
                            "value": "UAT_EM1_#04291c"
                        }
                    ]
                }
            },
            "response": []
        },
        {
            "name": "Get application by Id",
            "id": "563e1adb-0bb8-435c-b782-fa91ffd3306c",
            "protocolProfileBehavior": {
                "disableBodyPruning": true
            },
            "request": {
                "method": "GET",
                "header": [],
                "url": {
                    "raw": "{{URL}}/Func-SocGenEPOS-uat/ProcessAndRedirect/SocGenUATEPOS0142?access_token={{accessToken}}",
                    "host": [
                        "{{URL}}"
                    ],
                    "path": [
                        "Func-SocGenEPOS-uat",
                        "ProcessAndRedirect",
                        "SocGenUATEPOS0142"
                    ],
                    "query": [
                        {
                            "key": "access_token",
                            "value": "{{accessToken}}"
                        }
                    ]
                }
            },
            "response": []
        }
    ],
    "event": [
        {
            "listen": "prerequest",
            "script": {
                "type": "text/javascript",
                "exec": [
                    ""
                ],
                "id": "3e5482f0-1696-44c1-913e-3bd79b185077"
            }
        },
        {
            "listen": "test",
            "script": {
                "type": "text/javascript",
                "exec": [
                    ""
                ],
                "id": "0628a8f5-4076-4d41-b194-523614e9c228"
            }
        }
    ],
    "variable": [
        {
            "id": "a6c1e9b0-6e54-49dd-a468-7cdafade56f2",
            "key": "orderId",
            "value": ""
        },
        {
            "id": "b8b54e45-dd11-426e-801f-aa926038b83f",
            "key": "merchant",
            "value": ""
        },
        {
            "id": "52fc40da-453a-45f5-a5ed-107dd877b1db",
            "key": "URL",
            "value": "https://apimgm-socgenepos-uat.azure-api.net/Func-SocGenEPOS-UAT"
        }
    ]
}