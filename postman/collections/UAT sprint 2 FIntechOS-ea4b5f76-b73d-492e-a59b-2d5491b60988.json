{
	"info": {
		"_postman_id": "ea4b5f76-b73d-492e-a59b-2d5491b60988",
		"name": "UAT sprint 2 FIntechOS",
		"description": "Collection for UAT of FTOS delivered ePOS system.\n\n-Run one of the *GetToken* requests, to get the access token from SG Connect. This token is saved as a variable.\n-Run either of the *ProcessAndRedirect* re  requests to send initiate the journey\n-These requests generate a unique orderId in the pre-test to be used by the request. orderId is displayed in the console.\n-For the *ProcessAndRedirect - HB* request, a URL is returned. Copy this into a browser to test the flow.\n-For the *ProcessAndRedirect - FF* request, raw html is returned. Copy this into notepad and save it as a .html file. Then open the file in a browser to continue the journey.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "GetToken - eMerchant1",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							" var token = pm.response.json().body ;\r",
							" pm.globals.set('accessToken',pm.response.json().access_token);\r",
							" console.log(pm.response.json().access_token);"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"var merchant = \"EM1\"\r",
							"pm.collectionVariables.set(\"merchant\",merchant);\r",
							"\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "3l04hacc44g8kbd3eh64fldmg19e",
							"type": "string"
						},
						{
							"key": "username",
							"value": "797d24f4-6ff2-42c0-89f3-01a2989a0ae9",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/x-www-form-urlencoded",
						"type": "text"
					}
				],
				"url": {
					"raw": "https://sso.sgmarkets.com/sgconnect/oauth2/access_token?grant_type=client_credentials&scope=openid",
					"protocol": "https",
					"host": [
						"sso",
						"sgmarkets",
						"com"
					],
					"path": [
						"sgconnect",
						"oauth2",
						"access_token"
					],
					"query": [
						{
							"key": "grant_type",
							"value": "client_credentials"
						},
						{
							"key": "scope",
							"value": "openid"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "GetToken - eMerchant2",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							" var token = pm.response.json().body ;\r",
							" pm.globals.set('accessToken',pm.response.json().access_token);\r",
							" console.log(pm.response.json().access_token);"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"var merchant = \"EM2\"\r",
							"pm.collectionVariables.set(\"merchant\",merchant);\r",
							"\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "23c028cddg0239mgk0ce91h4cmm1g",
							"type": "string"
						},
						{
							"key": "username",
							"value": "12bea33e-0746-4022-a8d3-f487d04ec54b",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/x-www-form-urlencoded",
						"type": "text"
					}
				],
				"url": {
					"raw": "https://sso.sgmarkets.com/sgconnect/oauth2/access_token?grant_type=client_credentials&scope=openid",
					"protocol": "https",
					"host": [
						"sso",
						"sgmarkets",
						"com"
					],
					"path": [
						"sgconnect",
						"oauth2",
						"access_token"
					],
					"query": [
						{
							"key": "grant_type",
							"value": "client_credentials"
						},
						{
							"key": "scope",
							"value": "openid"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "do-initialize FF",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"var orderId = \"UAT_\" + pm.variables.get(\"merchant\") + \"_\" + pm.variables.replaceIn('{{$randomHexColor}}');\r",
							"console.log(orderId);\r",
							"pm.collectionVariables.set(\"orderId\",orderId);\r",
							"\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Token",
						"value": "ada861fa-7ded-4cb3-b0ff-bfbc20ce1eac",
						"type": "text",
						"disabled": true
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"amount\": 11400,\r\n    \"customerId\": \"701943\",\r\n    \"normalReturnUrl\": \"https://fintechos.com/\",\r\n    \"shoppingCartDetail\": {\r\n        \"mainProduct\": \"PANTALON B MAGO\",\r\n        \"shoppingCartTotalAmount\": \"9500\",\r\n        \"shoppingCartTotalQuantity\": \"2\",\r\n        \"SKU\": \"50\",\r\n        \"shoppingCartItemList\": {\r\n            \"productName\": \"PANTALON B MAGO\",\r\n            \"productUnitAmount\": \"4750\",\r\n            \"productQuantity\": \"2\",\r\n            \"productDescription\": \"\"\r\n        }\r\n    },\r\n    \"customerAddress\": {\r\n       \"city\": \"GAP\",\r\n        \"street\": \"93 Avenue d'Embrun\",\r\n        \"zipCode\": \"05000\",\r\n        \"country\": \"FR\"\r\n    },\r\n    \"billingAddress\": {\r\n        \"city\": \"Paris\",\r\n        \"street\": \"97 Avenue d'Embrun\",\r\n        \"zipCode\": \"06000\",\r\n        \"country\": \"FR\",\r\n        \"company\": \"\"\r\n    },\r\n    \"deliveryAddress\": {\r\n        \"city\": \"Paris\",\r\n        \"street\": \"voltaire\",\r\n        \"zipCode\": \"75000\",\r\n        \"country\": \"FR\",\r\n        \"company\": \"\"\r\n    },\r\n    \"customerContact\": {\r\n        \"legalId\": \"\",\r\n        \"email\": \"customer@email.com\",\r\n        \"lastName\": \"test\",\r\n        \"firstName\": \"david\",\r\n        \"mobile\": \"0676188860\",\r\n        \"phone\": \"0484749393\"\r\n    },\r\n    \"billingContact\": {\r\n        \"legalId\": \"\",\r\n        \"email\": \"customer@email.com\",\r\n        \"lastName\": \"GAP\",\r\n        \"firstName\": \"Maryon\",\r\n        \"mobile\": \"0676188860\",\r\n        \"phone\": \"0484749393\"\r\n    },\r\n     \"deliveryContact\": {\r\n        \"legalId\": \"\",\r\n        \"email\": \"customer@email.com\",\r\n        \"lastName\": \"Durand\",\r\n        \"firstName\": \"John\",\r\n        \"mobile\": \"0676188860\",\r\n        \"phone\": \"0678020202\"\r\n    },\r\n    \"orderId\": \"{{orderId}}\",\r\n    \"paymentMean\": \"FRF_3X\"\r\n}\r\n",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{URL}}/api/v1/customerApplications/do-initialize?access_token={{accessToken}}",
					"host": [
						"{{URL}}"
					],
					"path": [
						"api",
						"v1",
						"customerApplications",
						"do-initialize"
					],
					"query": [
						{
							"key": "access_token",
							"value": "{{accessToken}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "do-initialize HB",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"var orderId = \"UAT_\" + pm.variables.get(\"merchant\") + \"_\" + pm.variables.replaceIn('{{$randomHexColor}}');\r",
							"console.log(orderId);\r",
							"pm.collectionVariables.set(\"orderId\",orderId);\r",
							"\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Token",
						"value": "ada861fa-7ded-4cb3-b0ff-bfbc20ce1eac",
						"type": "text",
						"disabled": true
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n   \"amount\": 1400,\r\n   \"customerId\": \"701943\",\r\n   \"normalReturnUrl\": \"https://fintechos.com/\",\r\n   \"shoppingCartDetail\": {\r\n       \"mainProduct\": \"PANTALON B MAGO\",\r\n       \"shoppingCartTotalAmount\": \"9500\",\r\n       \"shoppingCartTotalQuantity\": \"2\",\r\n       \"SKU\": \"50\",\r\n       \"shoppingCartItemList\": {\r\n           \"productName\": \"PANTALON B MAGO\",\r\n           \"productUnitAmount\": \"4750\",\r\n           \"productQuantity\": \"2\",\r\n           \"productDescription\": \"\"\r\n       }\r\n   },\r\n   \"customerAddress\": {\r\n      \"city\": \"GAP\",\r\n       \"street\": \"93 Avenue d'Embrun\",\r\n       \"zipCode\": \"05000\",\r\n       \"country\": \"FR\"\r\n   },\r\n   \"billingAddress\": {\r\n       \"city\": \"Paris\",\r\n       \"street\": \"97 Avenue d'Embrun\",\r\n       \"zipCode\": \"06000\",\r\n       \"country\": \"FR\",\r\n       \"company\": \"\"\r\n   },\r\n   \"deliveryAddress\": {\r\n       \"city\": \"Paris\",\r\n       \"street\": \"voltaire\",\r\n       \"zipCode\": \"75000\",\r\n       \"country\": \"FR\",\r\n       \"company\": \"\"\r\n   },\r\n   \"customerContact\": {\r\n       \"legalId\": \"\",\r\n       \"email\": \"customer@email.com\",\r\n       \"lastName\": \"test\",\r\n       \"firstName\": \"david\",\r\n       \"mobile\": \"0676188860\",\r\n       \"phone\": \"0484749393\"\r\n   },\r\n   \"billingContact\": {\r\n       \"legalId\": \"\",\r\n       \"email\": \"customer@email.com\",\r\n       \"lastName\": \"GAP\",\r\n       \"firstName\": \"Maryon\",\r\n       \"mobile\": \"0676188860\",\r\n       \"phone\": \"0484749393\"\r\n   },\r\n    \"deliveryContact\": {\r\n       \"legalId\": \"\",\r\n       \"email\": \"customer@email.com\",\r\n       \"lastName\": \"Durand\",\r\n       \"firstName\": \"John\",\r\n       \"mobile\": \"0676188860\",\r\n       \"phone\": \"0678020202\"\r\n   },\r\n   \"orderId\": \"{{orderId}}\",\r\n   \"paymentMean\": \"REVOLVINGPOS\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{URL}}/api/v1/customerApplications/do-initialize?access_token={{accessToken}}",
					"host": [
						"{{URL}}"
					],
					"path": [
						"api",
						"v1",
						"customerApplications",
						"do-initialize"
					],
					"query": [
						{
							"key": "access_token",
							"value": "{{accessToken}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "do-search",
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{  \r\n    \"orderId\": \"ME040\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{URL}}/api/v1/customerApplications/do-search?access_token={{accessToken}}",
					"host": [
						"{{URL}}"
					],
					"path": [
						"api",
						"v1",
						"customerApplications",
						"do-search"
					],
					"query": [
						{
							"key": "access_token",
							"value": "{{accessToken}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Get application by Id",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{URL}}/api/v1/customerApplications/SocGenDEVEPOS1512?access_token={{accessToken}}",
					"host": [
						"{{URL}}"
					],
					"path": [
						"api",
						"v1",
						"customerApplications",
						"SocGenDEVEPOS1512"
					],
					"query": [
						{
							"key": "access_token",
							"value": "{{accessToken}}"
						}
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "orderId",
			"value": ""
		},
		{
			"key": "merchant",
			"value": ""
		},
		{
			"key": "URL",
			"value": "https://apimgm-socgenepos-uat.azure-api.net/Func-SocGenEPOS-UAT"
		}
	]
}